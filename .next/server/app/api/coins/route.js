"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/coins/route";
exports.ids = ["app/api/coins/route"];
exports.modules = {

/***/ "mongodb":
/*!**************************!*\
  !*** external "mongodb" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("mongodb");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("util");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fcoins%2Froute&page=%2Fapi%2Fcoins%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fcoins%2Froute.ts&appDir=D%3A%5Cgithub_repository%5Cporf_be%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5Cgithub_repository%5Cporf_be&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fcoins%2Froute&page=%2Fapi%2Fcoins%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fcoins%2Froute.ts&appDir=D%3A%5Cgithub_repository%5Cporf_be%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5Cgithub_repository%5Cporf_be&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var D_github_repository_porf_be_src_app_api_coins_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/coins/route.ts */ \"(rsc)/./src/app/api/coins/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/coins/route\",\n        pathname: \"/api/coins\",\n        filename: \"route\",\n        bundlePath: \"app/api/coins/route\"\n    },\n    resolvedPagePath: \"D:\\\\github_repository\\\\porf_be\\\\src\\\\app\\\\api\\\\coins\\\\route.ts\",\n    nextConfigOutput,\n    userland: D_github_repository_porf_be_src_app_api_coins_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/coins/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZjb2lucyUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGY29pbnMlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZjb2lucyUyRnJvdXRlLnRzJmFwcERpcj1EJTNBJTVDZ2l0aHViX3JlcG9zaXRvcnklNUNwb3JmX2JlJTVDc3JjJTVDYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj1EJTNBJTVDZ2l0aHViX3JlcG9zaXRvcnklNUNwb3JmX2JlJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUNjO0FBQzNGO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsaUVBQWlFO0FBQ3pFO0FBQ0E7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDdUg7O0FBRXZIIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmV4dGpzLW1vbmdvZGItYXBpLz9jMTFjIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIkQ6XFxcXGdpdGh1Yl9yZXBvc2l0b3J5XFxcXHBvcmZfYmVcXFxcc3JjXFxcXGFwcFxcXFxhcGlcXFxcY29pbnNcXFxccm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2NvaW5zL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvY29pbnNcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL2NvaW5zL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiRDpcXFxcZ2l0aHViX3JlcG9zaXRvcnlcXFxccG9yZl9iZVxcXFxzcmNcXFxcYXBwXFxcXGFwaVxcXFxjb2luc1xcXFxyb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvY29pbnMvcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fcoins%2Froute&page=%2Fapi%2Fcoins%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fcoins%2Froute.ts&appDir=D%3A%5Cgithub_repository%5Cporf_be%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5Cgithub_repository%5Cporf_be&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/coins/route.ts":
/*!************************************!*\
  !*** ./src/app/api/coins/route.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_mongodb__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/mongodb */ \"(rsc)/./src/lib/mongodb.ts\");\n/* harmony import */ var _lib_middleware__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/middleware */ \"(rsc)/./src/lib/middleware.ts\");\n/* harmony import */ var _lib_utils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/utils */ \"(rsc)/./src/lib/utils.ts\");\n/* harmony import */ var mongodb__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! mongodb */ \"mongodb\");\n/* harmony import */ var mongodb__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(mongodb__WEBPACK_IMPORTED_MODULE_4__);\n\n\n\n\n\n// GET /api/coins - Get all coins for authenticated user\nasync function GET(request) {\n    try {\n        // Authenticate user\n        const auth = await (0,_lib_middleware__WEBPACK_IMPORTED_MODULE_2__.authenticateRequest)(request);\n        if (!auth.success) {\n            const response = {\n                success: false,\n                error: auth.error || \"Authentication failed\"\n            };\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(response, {\n                status: 401\n            });\n        }\n        const client = await _lib_mongodb__WEBPACK_IMPORTED_MODULE_1__[\"default\"];\n        const db = client.db(\"hocdanit\");\n        const coinsCollection = db.collection(\"coins\");\n        // Get query parameters\n        const url = new URL(request.url);\n        const active = url.searchParams.get(\"active\");\n        const sort = url.searchParams.get(\"sort\") || \"createdAt\";\n        const order = url.searchParams.get(\"order\") || \"desc\";\n        // Build query\n        const query = {\n            userId: new mongodb__WEBPACK_IMPORTED_MODULE_4__.ObjectId(auth.userId)\n        };\n        if (active !== null) {\n            query.isActive = active === \"true\";\n        }\n        // Build sort\n        const sortObj = {};\n        sortObj[sort] = order === \"asc\" ? 1 : -1;\n        // Get coins\n        const coins = await coinsCollection.find(query).sort(sortObj).toArray();\n        // Calculate profit/loss for each coin\n        const coinsWithCalculations = coins.map((coin)=>{\n            const calc = _lib_utils__WEBPACK_IMPORTED_MODULE_3__.PortfolioUtils.calculateCoinProfitLoss(coin);\n            return {\n                ...coin,\n                currentValue: calc.currentValue,\n                profitLoss: calc.profitLoss,\n                profitLossPercentage: calc.profitLossPercentage\n            };\n        });\n        const response = {\n            success: true,\n            data: coinsWithCalculations,\n            total: coinsWithCalculations.length\n        };\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(response, {\n            status: 200\n        });\n    } catch (error) {\n        console.error(\"Get coins error:\", error);\n        const response = {\n            success: false,\n            error: \"Internal server error\",\n            message: \"Failed to get coins\"\n        };\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(response, {\n            status: 500\n        });\n    }\n}\n// POST /api/coins - Create new coin\nasync function POST(request) {\n    try {\n        // Authenticate user\n        const auth = await (0,_lib_middleware__WEBPACK_IMPORTED_MODULE_2__.authenticateRequest)(request);\n        if (!auth.success) {\n            const response = {\n                success: false,\n                error: auth.error || \"Authentication failed\"\n            };\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(response, {\n                status: 401\n            });\n        }\n        const body = await request.json();\n        // Validate input\n        const validation = _lib_utils__WEBPACK_IMPORTED_MODULE_3__.Validator.validateCoin(body);\n        if (!validation.isValid) {\n            const response = {\n                success: false,\n                error: \"Validation failed\",\n                message: validation.errors.join(\", \")\n            };\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(response, {\n                status: 400\n            });\n        }\n        const client = await _lib_mongodb__WEBPACK_IMPORTED_MODULE_1__[\"default\"];\n        const db = client.db(\"hocdanit\");\n        const coinsCollection = db.collection(\"coins\");\n        // Check if user already has this coin symbol\n        const existingCoin = await coinsCollection.findOne({\n            userId: new mongodb__WEBPACK_IMPORTED_MODULE_4__.ObjectId(auth.userId),\n            symbol: body.symbol.toUpperCase(),\n            isActive: true\n        });\n        if (existingCoin) {\n            const response = {\n                success: false,\n                error: \"Coin already exists\",\n                message: `You already have ${body.symbol.toUpperCase()} in your portfolio. Use update to modify existing coin.`\n            };\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(response, {\n                status: 409\n            });\n        }\n        // Calculate total invested\n        const totalInvested = body.quantity * body.averageBuyPrice;\n        // Create new coin\n        const newCoin = {\n            userId: new mongodb__WEBPACK_IMPORTED_MODULE_4__.ObjectId(auth.userId),\n            symbol: body.symbol.toUpperCase(),\n            name: body.name,\n            quantity: body.quantity,\n            averageBuyPrice: body.averageBuyPrice,\n            currentPrice: body.currentPrice || 0,\n            totalInvested,\n            currentValue: 0,\n            profitLoss: 0,\n            profitLossPercentage: 0,\n            note: body.note || \"\",\n            purchaseDate: new Date(body.purchaseDate),\n            lastPriceUpdate: body.currentPrice ? new Date() : undefined,\n            isActive: body.isActive !== false,\n            // New fields\n            logo: body.logo || \"\",\n            coinGeckoId: body.coinGeckoId || \"\",\n            marketCap: 0,\n            rank: 0,\n            volume24h: 0,\n            priceChange24h: 0,\n            priceChange7d: 0,\n            allTimeHigh: 0,\n            allTimeLow: 0,\n            circulatingSupply: 0,\n            totalSupply: 0,\n            maxSupply: 0,\n            website: body.website || \"\",\n            whitepaper: \"\",\n            explorer: \"\",\n            github: \"\",\n            category: body.category || \"\",\n            tags: body.tags || [],\n            description: body.description || \"\",\n            riskLevel: body.riskLevel || \"MEDIUM\",\n            investmentGoal: body.investmentGoal || \"LONG_TERM\",\n            alertSettings: body.alertSettings || {},\n            createdAt: new Date(),\n            updatedAt: new Date()\n        };\n        // Calculate profit/loss if current price is provided\n        if (newCoin.currentPrice && newCoin.currentPrice > 0) {\n            const calc = _lib_utils__WEBPACK_IMPORTED_MODULE_3__.PortfolioUtils.calculateCoinProfitLoss(newCoin);\n            newCoin.currentValue = calc.currentValue;\n            newCoin.profitLoss = calc.profitLoss;\n            newCoin.profitLossPercentage = calc.profitLossPercentage;\n        }\n        const result = await coinsCollection.insertOne(newCoin);\n        if (!result.insertedId) {\n            const response = {\n                success: false,\n                error: \"Failed to create coin\"\n            };\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(response, {\n                status: 500\n            });\n        }\n        const response = {\n            success: true,\n            message: \"Coin added successfully\",\n            data: {\n                ...newCoin,\n                _id: result.insertedId\n            }\n        };\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(response, {\n            status: 201\n        });\n    } catch (error) {\n        console.error(\"Create coin error:\", error);\n        const response = {\n            success: false,\n            error: \"Internal server error\",\n            message: \"Failed to create coin\"\n        };\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json(response, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LFVBQVUsR0FBR0gsS0FBS0csVUFBVTtZQUNwQ3FCLFFBQVFwQixvQkFBb0IsR0FBR0osS0FBS0ksb0JBQW9CO1FBQzFEO1FBRUEsTUFBTW9ELFNBQVMsTUFBTTNFLGdCQUFnQjRFLFNBQVMsQ0FBQ2pDO1FBRS9DLElBQUksQ0FBQ2dDLE9BQU9FLFVBQVUsRUFBRTtZQUN0QixNQUFNbkYsV0FBd0I7Z0JBQzVCRCxTQUFTO2dCQUNURSxPQUFPO1lBQ1Q7WUFDQSxPQUFPWCxxREFBWUEsQ0FBQ1ksSUFBSSxDQUFDRixVQUFVO2dCQUFFRyxRQUFRO1lBQUk7UUFDbkQ7UUFFQSxNQUFNSCxXQUE4QjtZQUNsQ0QsU0FBUztZQUNUbUMsU0FBUztZQUNUSixNQUFNO2dCQUFFLEdBQUdtQixPQUFPO2dCQUFFbUMsS0FBS0gsT0FBT0UsVUFBVTtZQUFDO1FBQzdDO1FBRUEsT0FBTzdGLHFEQUFZQSxDQUFDWSxJQUFJLENBQUNGLFVBQVU7WUFBRUcsUUFBUTtRQUFJO0lBQ25ELEVBQUUsT0FBT0YsT0FBTztRQUNkZ0MsUUFBUWhDLEtBQUssQ0FBQyxzQkFBc0JBO1FBQ3BDLE1BQU1ELFdBQXdCO1lBQzVCRCxTQUFTO1lBQ1RFLE9BQU87WUFDUGlDLFNBQVM7UUFDWDtRQUNBLE9BQU81QyxxREFBWUEsQ0FBQ1ksSUFBSSxDQUFDRixVQUFVO1lBQUVHLFFBQVE7UUFBSTtJQUNuRDtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmV4dGpzLW1vbmdvZGItYXBpLy4vc3JjL2FwcC9hcGkvY29pbnMvcm91dGUudHM/NTlhZCJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVxdWVzdCwgTmV4dFJlc3BvbnNlIH0gZnJvbSBcIm5leHQvc2VydmVyXCI7XG5pbXBvcnQgY2xpZW50UHJvbWlzZSBmcm9tIFwiQC9saWIvbW9uZ29kYlwiO1xuaW1wb3J0IHsgYXV0aGVudGljYXRlUmVxdWVzdCB9IGZyb20gXCJAL2xpYi9taWRkbGV3YXJlXCI7XG5pbXBvcnQgeyBWYWxpZGF0b3IsIFBvcnRmb2xpb1V0aWxzIH0gZnJvbSBcIkAvbGliL3V0aWxzXCI7XG5pbXBvcnQgeyBDb2luSW5wdXQsIEFwaVJlc3BvbnNlLCBDb2luIH0gZnJvbSBcIkAvdHlwZXNcIjtcbmltcG9ydCB7IE9iamVjdElkIH0gZnJvbSBcIm1vbmdvZGJcIjtcblxuLy8gR0VUIC9hcGkvY29pbnMgLSBHZXQgYWxsIGNvaW5zIGZvciBhdXRoZW50aWNhdGVkIHVzZXJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHRVQocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcbiAgdHJ5IHtcbiAgICAvLyBBdXRoZW50aWNhdGUgdXNlclxuICAgIGNvbnN0IGF1dGggPSBhd2FpdCBhdXRoZW50aWNhdGVSZXF1ZXN0KHJlcXVlc3QpO1xuICAgIGlmICghYXV0aC5zdWNjZXNzKSB7XG4gICAgICBjb25zdCByZXNwb25zZTogQXBpUmVzcG9uc2UgPSB7XG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgICBlcnJvcjogYXV0aC5lcnJvciB8fCBcIkF1dGhlbnRpY2F0aW9uIGZhaWxlZFwiLFxuICAgICAgfTtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihyZXNwb25zZSwgeyBzdGF0dXM6IDQwMSB9KTtcbiAgICB9XG5cbiAgICBjb25zdCBjbGllbnQgPSBhd2FpdCBjbGllbnRQcm9taXNlO1xuICAgIGNvbnN0IGRiID0gY2xpZW50LmRiKFwiaG9jZGFuaXRcIik7XG4gICAgY29uc3QgY29pbnNDb2xsZWN0aW9uID0gZGIuY29sbGVjdGlvbihcImNvaW5zXCIpO1xuXG4gICAgLy8gR2V0IHF1ZXJ5IHBhcmFtZXRlcnNcbiAgICBjb25zdCB1cmwgPSBuZXcgVVJMKHJlcXVlc3QudXJsKTtcbiAgICBjb25zdCBhY3RpdmUgPSB1cmwuc2VhcmNoUGFyYW1zLmdldChcImFjdGl2ZVwiKTtcbiAgICBjb25zdCBzb3J0ID0gdXJsLnNlYXJjaFBhcmFtcy5nZXQoXCJzb3J0XCIpIHx8IFwiY3JlYXRlZEF0XCI7XG4gICAgY29uc3Qgb3JkZXIgPSB1cmwuc2VhcmNoUGFyYW1zLmdldChcIm9yZGVyXCIpIHx8IFwiZGVzY1wiO1xuXG4gICAgLy8gQnVpbGQgcXVlcnlcbiAgICBjb25zdCBxdWVyeTogYW55ID0geyB1c2VySWQ6IG5ldyBPYmplY3RJZChhdXRoLnVzZXJJZCEpIH07XG4gICAgaWYgKGFjdGl2ZSAhPT0gbnVsbCkge1xuICAgICAgcXVlcnkuaXNBY3RpdmUgPSBhY3RpdmUgPT09IFwidHJ1ZVwiO1xuICAgIH1cblxuICAgIC8vIEJ1aWxkIHNvcnRcbiAgICBjb25zdCBzb3J0T2JqOiBhbnkgPSB7fTtcbiAgICBzb3J0T2JqW3NvcnRdID0gb3JkZXIgPT09IFwiYXNjXCIgPyAxIDogLTE7XG5cbiAgICAvLyBHZXQgY29pbnNcbiAgICBjb25zdCBjb2lucyA9IGF3YWl0IGNvaW5zQ29sbGVjdGlvbi5maW5kKHF1ZXJ5KS5zb3J0KHNvcnRPYmopLnRvQXJyYXkoKTtcblxuICAgIC8vIENhbGN1bGF0ZSBwcm9maXQvbG9zcyBmb3IgZWFjaCBjb2luXG4gICAgY29uc3QgY29pbnNXaXRoQ2FsY3VsYXRpb25zID0gY29pbnMubWFwKChjb2luKSA9PiB7XG4gICAgICBjb25zdCBjYWxjID0gUG9ydGZvbGlvVXRpbHMuY2FsY3VsYXRlQ29pblByb2ZpdExvc3MoY29pbiBhcyBDb2luKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIC4uLmNvaW4sXG4gICAgICAgIGN1cnJlbnRWYWx1ZTogY2FsYy5jdXJyZW50VmFsdWUsXG4gICAgICAgIHByb2ZpdExvc3M6IGNhbGMucHJvZml0TG9zcyxcbiAgICAgICAgcHJvZml0TG9zc1BlcmNlbnRhZ2U6IGNhbGMucHJvZml0TG9zc1BlcmNlbnRhZ2UsXG4gICAgICB9IGFzIENvaW47XG4gICAgfSk7XG5cbiAgICBjb25zdCByZXNwb25zZTogQXBpUmVzcG9uc2U8Q29pbltdPiA9IHtcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICBkYXRhOiBjb2luc1dpdGhDYWxjdWxhdGlvbnMsXG4gICAgICB0b3RhbDogY29pbnNXaXRoQ2FsY3VsYXRpb25zLmxlbmd0aCxcbiAgICB9O1xuXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHJlc3BvbnNlLCB7IHN0YXR1czogMjAwIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJHZXQgY29pbnMgZXJyb3I6XCIsIGVycm9yKTtcbiAgICBjb25zdCByZXNwb25zZTogQXBpUmVzcG9uc2UgPSB7XG4gICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgIGVycm9yOiBcIkludGVybmFsIHNlcnZlciBlcnJvclwiLFxuICAgICAgbWVzc2FnZTogXCJGYWlsZWQgdG8gZ2V0IGNvaW5zXCIsXG4gICAgfTtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24ocmVzcG9uc2UsIHsgc3RhdHVzOiA1MDAgfSk7XG4gIH1cbn1cblxuLy8gUE9TVCAvYXBpL2NvaW5zIC0gQ3JlYXRlIG5ldyBjb2luXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXF1ZXN0OiBOZXh0UmVxdWVzdCkge1xuICB0cnkge1xuICAgIC8vIEF1dGhlbnRpY2F0ZSB1c2VyXG4gICAgY29uc3QgYXV0aCA9IGF3YWl0IGF1dGhlbnRpY2F0ZVJlcXVlc3QocmVxdWVzdCk7XG4gICAgaWYgKCFhdXRoLnN1Y2Nlc3MpIHtcbiAgICAgIGNvbnN0IHJlc3BvbnNlOiBBcGlSZXNwb25zZSA9IHtcbiAgICAgICAgc3VjY2VzczogZmFsc2UsXG4gICAgICAgIGVycm9yOiBhdXRoLmVycm9yIHx8IFwiQXV0aGVudGljYXRpb24gZmFpbGVkXCIsXG4gICAgICB9O1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHJlc3BvbnNlLCB7IHN0YXR1czogNDAxIH0pO1xuICAgIH1cblxuICAgIGNvbnN0IGJvZHk6IENvaW5JbnB1dCA9IGF3YWl0IHJlcXVlc3QuanNvbigpO1xuXG4gICAgLy8gVmFsaWRhdGUgaW5wdXRcbiAgICBjb25zdCB2YWxpZGF0aW9uID0gVmFsaWRhdG9yLnZhbGlkYXRlQ29pbihib2R5KTtcbiAgICBpZiAoIXZhbGlkYXRpb24uaXNWYWxpZCkge1xuICAgICAgY29uc3QgcmVzcG9uc2U6IEFwaVJlc3BvbnNlID0ge1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IFwiVmFsaWRhdGlvbiBmYWlsZWRcIixcbiAgICAgICAgbWVzc2FnZTogdmFsaWRhdGlvbi5lcnJvcnMuam9pbihcIiwgXCIpLFxuICAgICAgfTtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihyZXNwb25zZSwgeyBzdGF0dXM6IDQwMCB9KTtcbiAgICB9XG5cbiAgICBjb25zdCBjbGllbnQgPSBhd2FpdCBjbGllbnRQcm9taXNlO1xuICAgIGNvbnN0IGRiID0gY2xpZW50LmRiKFwiaG9jZGFuaXRcIik7XG4gICAgY29uc3QgY29pbnNDb2xsZWN0aW9uID0gZGIuY29sbGVjdGlvbihcImNvaW5zXCIpO1xuXG4gICAgLy8gQ2hlY2sgaWYgdXNlciBhbHJlYWR5IGhhcyB0aGlzIGNvaW4gc3ltYm9sXG4gICAgY29uc3QgZXhpc3RpbmdDb2luID0gYXdhaXQgY29pbnNDb2xsZWN0aW9uLmZpbmRPbmUoe1xuICAgICAgdXNlcklkOiBuZXcgT2JqZWN0SWQoYXV0aC51c2VySWQhKSxcbiAgICAgIHN5bWJvbDogYm9keS5zeW1ib2wudG9VcHBlckNhc2UoKSxcbiAgICAgIGlzQWN0aXZlOiB0cnVlLFxuICAgIH0pO1xuXG4gICAgaWYgKGV4aXN0aW5nQ29pbikge1xuICAgICAgY29uc3QgcmVzcG9uc2U6IEFwaVJlc3BvbnNlID0ge1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IFwiQ29pbiBhbHJlYWR5IGV4aXN0c1wiLFxuICAgICAgICBtZXNzYWdlOiBgWW91IGFscmVhZHkgaGF2ZSAke2JvZHkuc3ltYm9sLnRvVXBwZXJDYXNlKCl9IGluIHlvdXIgcG9ydGZvbGlvLiBVc2UgdXBkYXRlIHRvIG1vZGlmeSBleGlzdGluZyBjb2luLmAsXG4gICAgICB9O1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHJlc3BvbnNlLCB7IHN0YXR1czogNDA5IH0pO1xuICAgIH1cblxuICAgIC8vIENhbGN1bGF0ZSB0b3RhbCBpbnZlc3RlZFxuICAgIGNvbnN0IHRvdGFsSW52ZXN0ZWQgPSBib2R5LnF1YW50aXR5ICogYm9keS5hdmVyYWdlQnV5UHJpY2U7XG5cbiAgICAvLyBDcmVhdGUgbmV3IGNvaW5cbiAgICBjb25zdCBuZXdDb2luOiBDb2luID0ge1xuICAgICAgdXNlcklkOiBuZXcgT2JqZWN0SWQoYXV0aC51c2VySWQhKSxcbiAgICAgIHN5bWJvbDogYm9keS5zeW1ib2wudG9VcHBlckNhc2UoKSxcbiAgICAgIG5hbWU6IGJvZHkubmFtZSxcbiAgICAgIHF1YW50aXR5OiBib2R5LnF1YW50aXR5LFxuICAgICAgYXZlcmFnZUJ1eVByaWNlOiBib2R5LmF2ZXJhZ2VCdXlQcmljZSxcbiAgICAgIGN1cnJlbnRQcmljZTogYm9keS5jdXJyZW50UHJpY2UgfHwgMCxcbiAgICAgIHRvdGFsSW52ZXN0ZWQsXG4gICAgICBjdXJyZW50VmFsdWU6IDAsXG4gICAgICBwcm9maXRMb3NzOiAwLFxuICAgICAgcHJvZml0TG9zc1BlcmNlbnRhZ2U6IDAsXG4gICAgICBub3RlOiBib2R5Lm5vdGUgfHwgXCJcIixcbiAgICAgIHB1cmNoYXNlRGF0ZTogbmV3IERhdGUoYm9keS5wdXJjaGFzZURhdGUpLFxuICAgICAgbGFzdFByaWNlVXBkYXRlOiBib2R5LmN1cnJlbnRQcmljZSA/IG5ldyBEYXRlKCkgOiB1bmRlZmluZWQsXG4gICAgICBpc0FjdGl2ZTogYm9keS5pc0FjdGl2ZSAhPT0gZmFsc2UsXG4gICAgICAvLyBOZXcgZmllbGRzXG4gICAgICBsb2dvOiBib2R5LmxvZ28gfHwgXCJcIixcbiAgICAgIGNvaW5HZWNrb0lkOiBib2R5LmNvaW5HZWNrb0lkIHx8IFwiXCIsXG4gICAgICBtYXJrZXRDYXA6IDAsXG4gICAgICByYW5rOiAwLFxuICAgICAgdm9sdW1lMjRoOiAwLFxuICAgICAgcHJpY2VDaGFuZ2UyNGg6IDAsXG4gICAgICBwcmljZUNoYW5nZTdkOiAwLFxuICAgICAgYWxsVGltZUhpZ2g6IDAsXG4gICAgICBhbGxUaW1lTG93OiAwLFxuICAgICAgY2lyY3VsYXRpbmdTdXBwbHk6IDAsXG4gICAgICB0b3RhbFN1cHBseTogMCxcbiAgICAgIG1heFN1cHBseTogMCxcbiAgICAgIHdlYnNpdGU6IGJvZHkud2Vic2l0ZSB8fCBcIlwiLFxuICAgICAgd2hpdGVwYXBlcjogXCJcIixcbiAgICAgIGV4cGxvcmVyOiBcIlwiLFxuICAgICAgZ2l0aHViOiBcIlwiLFxuICAgICAgY2F0ZWdvcnk6IGJvZHkuY2F0ZWdvcnkgfHwgXCJcIixcbiAgICAgIHRhZ3M6IGJvZHkudGFncyB8fCBbXSxcbiAgICAgIGRlc2NyaXB0aW9uOiBib2R5LmRlc2NyaXB0aW9uIHx8IFwiXCIsXG4gICAgICByaXNrTGV2ZWw6IGJvZHkucmlza0xldmVsIHx8IFwiTUVESVVNXCIsXG4gICAgICBpbnZlc3RtZW50R29hbDogYm9keS5pbnZlc3RtZW50R29hbCB8fCBcIkxPTkdfVEVSTVwiLFxuICAgICAgYWxlcnRTZXR0aW5nczogYm9keS5hbGVydFNldHRpbmdzIHx8IHt9LFxuICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLFxuICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpLFxuICAgIH07XG5cbiAgICAvLyBDYWxjdWxhdGUgcHJvZml0L2xvc3MgaWYgY3VycmVudCBwcmljZSBpcyBwcm92aWRlZFxuICAgIGlmIChuZXdDb2luLmN1cnJlbnRQcmljZSAmJiBuZXdDb2luLmN1cnJlbnRQcmljZSA+IDApIHtcbiAgICAgIGNvbnN0IGNhbGMgPSBQb3J0Zm9saW9VdGlscy5jYWxjdWxhdGVDb2luUHJvZml0TG9zcyhuZXdDb2luKTtcbiAgICAgIG5ld0NvaW4uY3VycmVudFZhbHVlID0gY2FsYy5jdXJyZW50VmFsdWU7XG4gICAgICBuZXdDb2luLnByb2ZpdExvc3MgPSBjYWxjLnByb2ZpdExvc3M7XG4gICAgICBuZXdDb2luLnByb2ZpdExvc3NQZXJjZW50YWdlID0gY2FsYy5wcm9maXRMb3NzUGVyY2VudGFnZTtcbiAgICB9XG5cbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjb2luc0NvbGxlY3Rpb24uaW5zZXJ0T25lKG5ld0NvaW4pO1xuXG4gICAgaWYgKCFyZXN1bHQuaW5zZXJ0ZWRJZCkge1xuICAgICAgY29uc3QgcmVzcG9uc2U6IEFwaVJlc3BvbnNlID0ge1xuICAgICAgICBzdWNjZXNzOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IFwiRmFpbGVkIHRvIGNyZWF0ZSBjb2luXCIsXG4gICAgICB9O1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHJlc3BvbnNlLCB7IHN0YXR1czogNTAwIH0pO1xuICAgIH1cblxuICAgIGNvbnN0IHJlc3BvbnNlOiBBcGlSZXNwb25zZTxDb2luPiA9IHtcbiAgICAgIHN1Y2Nlc3M6IHRydWUsXG4gICAgICBtZXNzYWdlOiBcIkNvaW4gYWRkZWQgc3VjY2Vzc2Z1bGx5XCIsXG4gICAgICBkYXRhOiB7IC4uLm5ld0NvaW4sIF9pZDogcmVzdWx0Lmluc2VydGVkSWQgfSxcbiAgICB9O1xuXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHJlc3BvbnNlLCB7IHN0YXR1czogMjAxIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJDcmVhdGUgY29pbiBlcnJvcjpcIiwgZXJyb3IpO1xuICAgIGNvbnN0IHJlc3BvbnNlOiBBcGlSZXNwb25zZSA9IHtcbiAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxuICAgICAgZXJyb3I6IFwiSW50ZXJuYWwgc2VydmVyIGVycm9yXCIsXG4gICAgICBtZXNzYWdlOiBcIkZhaWxlZCB0byBjcmVhdGUgY29pblwiLFxuICAgIH07XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHJlc3BvbnNlLCB7IHN0YXR1czogNTAwIH0pO1xuICB9XG59XG4iXSwibmFtZXMiOlsiTmV4dFJlc3BvbnNlIiwiY2xpZW50UHJvbWlzZSIsImF1dGhlbnRpY2F0ZVJlcXVlc3QiLCJWYWxpZGF0b3IiLCJQb3J0Zm9saW9VdGlscyIsIk9iamVjdElkIiwiR0VUIiwicmVxdWVzdCIsImF1dGgiLCJzdWNjZXNzIiwicmVzcG9uc2UiLCJlcnJvciIsImpzb24iLCJzdGF0dXMiLCJjbGllbnQiLCJkYiIsImNvaW5zQ29sbGVjdGlvbiIsImNvbGxlY3Rpb24iLCJ1cmwiLCJVUkwiLCJhY3RpdmUiLCJzZWFyY2hQYXJhbXMiLCJnZXQiLCJzb3J0Iiwib3JkZXIiLCJxdWVyeSIsInVzZXJJZCIsImlzQWN0aXZlIiwic29ydE9iaiIsImNvaW5zIiwiZmluZCIsInRvQXJyYXkiLCJjb2luc1dpdGhDYWxjdWxhdGlvbnMiLCJtYXAiLCJjb2luIiwiY2FsYyIsImNhbGN1bGF0ZUNvaW5Qcm9maXRMb3NzIiwiY3VycmVudFZhbHVlIiwicHJvZml0TG9zcyIsInByb2ZpdExvc3NQZXJjZW50YWdlIiwiZGF0YSIsInRvdGFsIiwibGVuZ3RoIiwiY29uc29sZSIsIm1lc3NhZ2UiLCJQT1NUIiwiYm9keSIsInZhbGlkYXRpb24iLCJ2YWxpZGF0ZUNvaW4iLCJpc1ZhbGlkIiwiZXJyb3JzIiwiam9pbiIsImV4aXN0aW5nQ29pbiIsImZpbmRPbmUiLCJzeW1ib2wiLCJ0b1VwcGVyQ2FzZSIsInRvdGFsSW52ZXN0ZWQiLCJxdWFudGl0eSIsImF2ZXJhZ2VCdXlQcmljZSIsIm5ld0NvaW4iLCJuYW1lIiwiY3VycmVudFByaWNlIiwibm90ZSIsInB1cmNoYXNlRGF0ZSIsIkRhdGUiLCJsYXN0UHJpY2VVcGRhdGUiLCJ1bmRlZmluZWQiLCJsb2dvIiwiY29pbkdlY2tvSWQiLCJtYXJrZXRDYXAiLCJyYW5rIiwidm9sdW1lMjRoIiwicHJpY2VDaGFuZ2UyNGgiLCJwcmljZUNoYW5nZTdkIiwiYWxsVGltZUhpZ2giLCJhbGxUaW1lTG93IiwiY2lyY3VsYXRpbmdTdXBwbHkiLCJ0b3RhbFN1cHBseSIsIm1heFN1cHBseSIsIndlYnNpdGUiLCJ3aGl0ZXBhcGVyIiwiZXhwbG9yZXIiLCJnaXRodWIiLCJjYXRlZ29yeSIsInRhZ3MiLCJkZXNjcmlwdGlvbiIsInJpc2tMZXZlbCIsImludmVzdG1lbnRHb2FsIiwiYWxlcnRTZXR0aW5ncyIsImNyZWF0ZWRBdCIsInVwZGF0ZWRBdCIsInJlc3VsdCIsImluc2VydE9uZSIsImluc2VydGVkSWQiLCJfaWQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/coins/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/middleware.ts":
/*!*******************************!*\
  !*** ./src/lib/middleware.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   authMiddleware: () => (/* binding */ authMiddleware),\n/* harmony export */   authenticateRequest: () => (/* binding */ authenticateRequest),\n/* harmony export */   getAuthenticatedUserEmail: () => (/* binding */ getAuthenticatedUserEmail),\n/* harmony export */   getAuthenticatedUserId: () => (/* binding */ getAuthenticatedUserId)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _utils__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./utils */ \"(rsc)/./src/lib/utils.ts\");\n/* harmony import */ var _mongodb__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./mongodb */ \"(rsc)/./src/lib/mongodb.ts\");\n/* harmony import */ var mongodb__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! mongodb */ \"mongodb\");\n/* harmony import */ var mongodb__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(mongodb__WEBPACK_IMPORTED_MODULE_3__);\n\n\n\n\n// Middleware to check authentication\nasync function authMiddleware(request) {\n    try {\n        // Get token from Authorization header\n        const authHeader = request.headers.get(\"authorization\");\n        const token = _utils__WEBPACK_IMPORTED_MODULE_1__.AuthUtils.extractTokenFromHeader(authHeader);\n        if (!token) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: \"No token provided\"\n            }, {\n                status: 401\n            });\n        }\n        // Verify token\n        const decoded = _utils__WEBPACK_IMPORTED_MODULE_1__.AuthUtils.verifyToken(token);\n        if (!decoded) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: \"Invalid or expired token\"\n            }, {\n                status: 401\n            });\n        }\n        // Check if user exists in database\n        const client = await _mongodb__WEBPACK_IMPORTED_MODULE_2__[\"default\"];\n        const db = client.db(\"hocdanit\");\n        const user = await db.collection(\"users\").findOne({\n            _id: new mongodb__WEBPACK_IMPORTED_MODULE_3__.ObjectId(decoded.userId),\n            isActive: {\n                $ne: false\n            }\n        });\n        if (!user) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: \"User not found or inactive\"\n            }, {\n                status: 401\n            });\n        }\n        // Add user info to request headers for the API route to use\n        const requestHeaders = new Headers(request.headers);\n        requestHeaders.set(\"x-user-id\", decoded.userId);\n        requestHeaders.set(\"x-user-email\", user.email);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.next({\n            request: {\n                headers: requestHeaders\n            }\n        });\n    } catch (error) {\n        console.error(\"Auth middleware error:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            error: \"Authentication failed\"\n        }, {\n            status: 500\n        });\n    }\n}\n// Helper function to get authenticated user ID from request headers\nfunction getAuthenticatedUserId(request) {\n    return request.headers.get(\"x-user-id\");\n}\n// Helper function to get authenticated user email from request headers\nfunction getAuthenticatedUserEmail(request) {\n    return request.headers.get(\"x-user-email\");\n}\n// Helper function to manually authenticate request (for API routes that don't use middleware)\nasync function authenticateRequest(request) {\n    try {\n        const authHeader = request.headers.get(\"authorization\");\n        const token = _utils__WEBPACK_IMPORTED_MODULE_1__.AuthUtils.extractTokenFromHeader(authHeader);\n        if (!token) {\n            return {\n                success: false,\n                error: \"No token provided\"\n            };\n        }\n        const decoded = _utils__WEBPACK_IMPORTED_MODULE_1__.AuthUtils.verifyToken(token);\n        if (!decoded) {\n            return {\n                success: false,\n                error: \"Invalid or expired token\"\n            };\n        }\n        // Check if user exists\n        const client = await _mongodb__WEBPACK_IMPORTED_MODULE_2__[\"default\"];\n        const db = client.db(\"hocdanit\");\n        const user = await db.collection(\"users\").findOne({\n            _id: new mongodb__WEBPACK_IMPORTED_MODULE_3__.ObjectId(decoded.userId),\n            isActive: {\n                $ne: false\n            }\n        });\n        if (!user) {\n            return {\n                success: false,\n                error: \"User not found or inactive\"\n            };\n        }\n        return {\n            success: true,\n            userId: decoded.userId\n        };\n    } catch (error) {\n        console.error(\"Authentication error:\", error);\n        return {\n            success: false,\n            error: \"Authentication failed\"\n        };\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QU1ELEdBQUdFLFVBQVUsQ0FBQyxTQUFTQyxPQUFPLENBQUM7WUFDaERDLEtBQUssSUFBSW5CLDZDQUFRQSxDQUFDWSxRQUFRUSxNQUFNO1lBQ2hDQyxVQUFVO2dCQUFFQyxLQUFLO1lBQU07UUFDekI7UUFFQSxJQUFJLENBQUNOLE1BQU07WUFDVCxPQUFPO2dCQUFFUCxTQUFTO2dCQUFPQyxPQUFPO1lBQTZCO1FBQy9EO1FBRUEsT0FBTztZQUFFRCxTQUFTO1lBQU1XLFFBQVFSLFFBQVFRLE1BQU07UUFBQztJQUNqRCxFQUFFLE9BQU9WLE9BQU87UUFDZGtCLFFBQVFsQixLQUFLLENBQUMseUJBQXlCQTtRQUN2QyxPQUFPO1lBQUVELFNBQVM7WUFBT0MsT0FBTztRQUF3QjtJQUMxRDtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmV4dGpzLW1vbmdvZGItYXBpLy4vc3JjL2xpYi9taWRkbGV3YXJlLnRzP2I3YjAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gXCJuZXh0L3NlcnZlclwiO1xuaW1wb3J0IHsgQXV0aFV0aWxzIH0gZnJvbSBcIi4vdXRpbHNcIjtcbmltcG9ydCBjbGllbnRQcm9taXNlIGZyb20gXCIuL21vbmdvZGJcIjtcbmltcG9ydCB7IE9iamVjdElkIH0gZnJvbSBcIm1vbmdvZGJcIjtcblxuLy8gTWlkZGxld2FyZSB0byBjaGVjayBhdXRoZW50aWNhdGlvblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGF1dGhNaWRkbGV3YXJlKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KSB7XG4gIHRyeSB7XG4gICAgLy8gR2V0IHRva2VuIGZyb20gQXV0aG9yaXphdGlvbiBoZWFkZXJcbiAgICBjb25zdCBhdXRoSGVhZGVyID0gcmVxdWVzdC5oZWFkZXJzLmdldChcImF1dGhvcml6YXRpb25cIik7XG4gICAgY29uc3QgdG9rZW4gPSBBdXRoVXRpbHMuZXh0cmFjdFRva2VuRnJvbUhlYWRlcihhdXRoSGVhZGVyKTtcblxuICAgIGlmICghdG9rZW4pIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IFwiTm8gdG9rZW4gcHJvdmlkZWRcIiB9LFxuICAgICAgICB7IHN0YXR1czogNDAxIH1cbiAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gVmVyaWZ5IHRva2VuXG4gICAgY29uc3QgZGVjb2RlZCA9IEF1dGhVdGlscy52ZXJpZnlUb2tlbih0b2tlbik7XG4gICAgaWYgKCFkZWNvZGVkKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBcIkludmFsaWQgb3IgZXhwaXJlZCB0b2tlblwiIH0sXG4gICAgICAgIHsgc3RhdHVzOiA0MDEgfVxuICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyBDaGVjayBpZiB1c2VyIGV4aXN0cyBpbiBkYXRhYmFzZVxuICAgIGNvbnN0IGNsaWVudCA9IGF3YWl0IGNsaWVudFByb21pc2U7XG4gICAgY29uc3QgZGIgPSBjbGllbnQuZGIoXCJob2NkYW5pdFwiKTtcbiAgICBjb25zdCB1c2VyID0gYXdhaXQgZGIuY29sbGVjdGlvbihcInVzZXJzXCIpLmZpbmRPbmUoe1xuICAgICAgX2lkOiBuZXcgT2JqZWN0SWQoZGVjb2RlZC51c2VySWQpLFxuICAgICAgaXNBY3RpdmU6IHsgJG5lOiBmYWxzZSB9LFxuICAgIH0pO1xuXG4gICAgaWYgKCF1c2VyKSB7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICAgIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBcIlVzZXIgbm90IGZvdW5kIG9yIGluYWN0aXZlXCIgfSxcbiAgICAgICAgeyBzdGF0dXM6IDQwMSB9XG4gICAgICApO1xuICAgIH1cblxuICAgIC8vIEFkZCB1c2VyIGluZm8gdG8gcmVxdWVzdCBoZWFkZXJzIGZvciB0aGUgQVBJIHJvdXRlIHRvIHVzZVxuICAgIGNvbnN0IHJlcXVlc3RIZWFkZXJzID0gbmV3IEhlYWRlcnMocmVxdWVzdC5oZWFkZXJzKTtcbiAgICByZXF1ZXN0SGVhZGVycy5zZXQoXCJ4LXVzZXItaWRcIiwgZGVjb2RlZC51c2VySWQpO1xuICAgIHJlcXVlc3RIZWFkZXJzLnNldChcIngtdXNlci1lbWFpbFwiLCB1c2VyLmVtYWlsKTtcblxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UubmV4dCh7XG4gICAgICByZXF1ZXN0OiB7XG4gICAgICAgIGhlYWRlcnM6IHJlcXVlc3RIZWFkZXJzLFxuICAgICAgfSxcbiAgICB9KTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiQXV0aCBtaWRkbGV3YXJlIGVycm9yOlwiLCBlcnJvcik7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgeyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IFwiQXV0aGVudGljYXRpb24gZmFpbGVkXCIgfSxcbiAgICAgIHsgc3RhdHVzOiA1MDAgfVxuICAgICk7XG4gIH1cbn1cblxuLy8gSGVscGVyIGZ1bmN0aW9uIHRvIGdldCBhdXRoZW50aWNhdGVkIHVzZXIgSUQgZnJvbSByZXF1ZXN0IGhlYWRlcnNcbmV4cG9ydCBmdW5jdGlvbiBnZXRBdXRoZW50aWNhdGVkVXNlcklkKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KTogc3RyaW5nIHwgbnVsbCB7XG4gIHJldHVybiByZXF1ZXN0LmhlYWRlcnMuZ2V0KFwieC11c2VyLWlkXCIpO1xufVxuXG4vLyBIZWxwZXIgZnVuY3Rpb24gdG8gZ2V0IGF1dGhlbnRpY2F0ZWQgdXNlciBlbWFpbCBmcm9tIHJlcXVlc3QgaGVhZGVyc1xuZXhwb3J0IGZ1bmN0aW9uIGdldEF1dGhlbnRpY2F0ZWRVc2VyRW1haWwocmVxdWVzdDogTmV4dFJlcXVlc3QpOiBzdHJpbmcgfCBudWxsIHtcbiAgcmV0dXJuIHJlcXVlc3QuaGVhZGVycy5nZXQoXCJ4LXVzZXItZW1haWxcIik7XG59XG5cbi8vIEhlbHBlciBmdW5jdGlvbiB0byBtYW51YWxseSBhdXRoZW50aWNhdGUgcmVxdWVzdCAoZm9yIEFQSSByb3V0ZXMgdGhhdCBkb24ndCB1c2UgbWlkZGxld2FyZSlcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBhdXRoZW50aWNhdGVSZXF1ZXN0KHJlcXVlc3Q6IE5leHRSZXF1ZXN0KTogUHJvbWlzZTx7XG4gIHN1Y2Nlc3M6IGJvb2xlYW47XG4gIHVzZXJJZD86IHN0cmluZztcbiAgZXJyb3I/OiBzdHJpbmc7XG59PiB7XG4gIHRyeSB7XG4gICAgY29uc3QgYXV0aEhlYWRlciA9IHJlcXVlc3QuaGVhZGVycy5nZXQoXCJhdXRob3JpemF0aW9uXCIpO1xuICAgIGNvbnN0IHRva2VuID0gQXV0aFV0aWxzLmV4dHJhY3RUb2tlbkZyb21IZWFkZXIoYXV0aEhlYWRlcik7XG5cbiAgICBpZiAoIXRva2VuKSB7XG4gICAgICByZXR1cm4geyBzdWNjZXNzOiBmYWxzZSwgZXJyb3I6IFwiTm8gdG9rZW4gcHJvdmlkZWRcIiB9O1xuICAgIH1cblxuICAgIGNvbnN0IGRlY29kZWQgPSBBdXRoVXRpbHMudmVyaWZ5VG9rZW4odG9rZW4pO1xuICAgIGlmICghZGVjb2RlZCkge1xuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBcIkludmFsaWQgb3IgZXhwaXJlZCB0b2tlblwiIH07XG4gICAgfVxuXG4gICAgLy8gQ2hlY2sgaWYgdXNlciBleGlzdHNcbiAgICBjb25zdCBjbGllbnQgPSBhd2FpdCBjbGllbnRQcm9taXNlO1xuICAgIGNvbnN0IGRiID0gY2xpZW50LmRiKFwiaG9jZGFuaXRcIik7XG4gICAgY29uc3QgdXNlciA9IGF3YWl0IGRiLmNvbGxlY3Rpb24oXCJ1c2Vyc1wiKS5maW5kT25lKHtcbiAgICAgIF9pZDogbmV3IE9iamVjdElkKGRlY29kZWQudXNlcklkKSxcbiAgICAgIGlzQWN0aXZlOiB7ICRuZTogZmFsc2UgfSxcbiAgICB9KTtcblxuICAgIGlmICghdXNlcikge1xuICAgICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBcIlVzZXIgbm90IGZvdW5kIG9yIGluYWN0aXZlXCIgfTtcbiAgICB9XG5cbiAgICByZXR1cm4geyBzdWNjZXNzOiB0cnVlLCB1c2VySWQ6IGRlY29kZWQudXNlcklkIH07XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkF1dGhlbnRpY2F0aW9uIGVycm9yOlwiLCBlcnJvcik7XG4gICAgcmV0dXJuIHsgc3VjY2VzczogZmFsc2UsIGVycm9yOiBcIkF1dGhlbnRpY2F0aW9uIGZhaWxlZFwiIH07XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJBdXRoVXRpbHMiLCJjbGllbnRQcm9taXNlIiwiT2JqZWN0SWQiLCJhdXRoTWlkZGxld2FyZSIsInJlcXVlc3QiLCJhdXRoSGVhZGVyIiwiaGVhZGVycyIsImdldCIsInRva2VuIiwiZXh0cmFjdFRva2VuRnJvbUhlYWRlciIsImpzb24iLCJzdWNjZXNzIiwiZXJyb3IiLCJzdGF0dXMiLCJkZWNvZGVkIiwidmVyaWZ5VG9rZW4iLCJjbGllbnQiLCJkYiIsInVzZXIiLCJjb2xsZWN0aW9uIiwiZmluZE9uZSIsIl9pZCIsInVzZXJJZCIsImlzQWN0aXZlIiwiJG5lIiwicmVxdWVzdEhlYWRlcnMiLCJIZWFkZXJzIiwic2V0IiwiZW1haWwiLCJuZXh0IiwiY29uc29sZSIsImdldEF1dGhlbnRpY2F0ZWRVc2VySWQiLCJnZXRBdXRoZW50aWNhdGVkVXNlckVtYWlsIiwiYXV0aGVudGljYXRlUmVxdWVzdCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/middleware.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/mongodb.ts":
/*!****************************!*\
  !*** ./src/lib/mongodb.ts ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var mongodb__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongodb */ \"mongodb\");\n/* harmony import */ var mongodb__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongodb__WEBPACK_IMPORTED_MODULE_0__);\n\nif (false) {}\nconst uri = \"mongodb+srv://wongun78:kVV1lYSZiZtVxwjr@cluster0.byoz5sf.mongodb.net/hocdanit?retryWrites=true&w=majority\";\nconst options = {};\nlet client;\nlet clientPromise;\nif (true) {\n    // In development mode, use a global variable so that the value\n    // is preserved across module reloads caused by HMR (Hot Module Replacement).\n    if (!global._mongoClientPromise) {\n        client = new mongodb__WEBPACK_IMPORTED_MODULE_0__.MongoClient(uri, options);\n        global._mongoClientPromise = client.connect();\n    }\n    clientPromise = global._mongoClientPromise;\n} else {}\n// Export a module-scoped MongoClient promise. By doing this in a\n// separate module, the client can be shared across functions.\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (clientPromise);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL21vbmdvZGIudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQXNDO0FBRXRDLElBQUksS0FBd0IsRUFBRSxFQUU3QjtBQUVELE1BQU1LLE1BQU1KLDJHQUF1QjtBQUNuQyxNQUFNSyxVQUFVLENBQUM7QUFFakIsSUFBSUM7QUFDSixJQUFJQztBQU1KLElBQUlQLElBQXNDLEVBQUU7SUFDMUMsK0RBQStEO0lBQy9ELDZFQUE2RTtJQUM3RSxJQUFJLENBQUNRLE9BQU9DLG1CQUFtQixFQUFFO1FBQy9CSCxTQUFTLElBQUlQLGdEQUFXQSxDQUFDSyxLQUFLQztRQUM5QkcsT0FBT0MsbUJBQW1CLEdBQUdILE9BQU9JLE9BQU87SUFDN0M7SUFDQUgsZ0JBQWdCQyxPQUFPQyxtQkFBbUI7QUFDNUMsT0FBTyxFQUlOO0FBRUQsaUVBQWlFO0FBQ2pFLDhEQUE4RDtBQUM5RCxpRUFBZUYsYUFBYUEsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL25leHRqcy1tb25nb2RiLWFwaS8uL3NyYy9saWIvbW9uZ29kYi50cz81M2MyIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE1vbmdvQ2xpZW50IH0gZnJvbSBcIm1vbmdvZGJcIjtcblxuaWYgKCFwcm9jZXNzLmVudi5NT05HT0RCX1VSSSkge1xuICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQvTWlzc2luZyBlbnZpcm9ubWVudCB2YXJpYWJsZTogXCJNT05HT0RCX1VSSVwiJyk7XG59XG5cbmNvbnN0IHVyaSA9IHByb2Nlc3MuZW52Lk1PTkdPREJfVVJJO1xuY29uc3Qgb3B0aW9ucyA9IHt9O1xuXG5sZXQgY2xpZW50OiBNb25nb0NsaWVudDtcbmxldCBjbGllbnRQcm9taXNlOiBQcm9taXNlPE1vbmdvQ2xpZW50PjtcblxuZGVjbGFyZSBnbG9iYWwge1xuICB2YXIgX21vbmdvQ2xpZW50UHJvbWlzZTogUHJvbWlzZTxNb25nb0NsaWVudD4gfCB1bmRlZmluZWQ7XG59XG5cbmlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gXCJkZXZlbG9wbWVudFwiKSB7XG4gIC8vIEluIGRldmVsb3BtZW50IG1vZGUsIHVzZSBhIGdsb2JhbCB2YXJpYWJsZSBzbyB0aGF0IHRoZSB2YWx1ZVxuICAvLyBpcyBwcmVzZXJ2ZWQgYWNyb3NzIG1vZHVsZSByZWxvYWRzIGNhdXNlZCBieSBITVIgKEhvdCBNb2R1bGUgUmVwbGFjZW1lbnQpLlxuICBpZiAoIWdsb2JhbC5fbW9uZ29DbGllbnRQcm9taXNlKSB7XG4gICAgY2xpZW50ID0gbmV3IE1vbmdvQ2xpZW50KHVyaSwgb3B0aW9ucyk7XG4gICAgZ2xvYmFsLl9tb25nb0NsaWVudFByb21pc2UgPSBjbGllbnQuY29ubmVjdCgpO1xuICB9XG4gIGNsaWVudFByb21pc2UgPSBnbG9iYWwuX21vbmdvQ2xpZW50UHJvbWlzZTtcbn0gZWxzZSB7XG4gIC8vIEluIHByb2R1Y3Rpb24gbW9kZSwgaXQncyBiZXN0IHRvIG5vdCB1c2UgYSBnbG9iYWwgdmFyaWFibGUuXG4gIGNsaWVudCA9IG5ldyBNb25nb0NsaWVudCh1cmksIG9wdGlvbnMpO1xuICBjbGllbnRQcm9taXNlID0gY2xpZW50LmNvbm5lY3QoKTtcbn1cblxuLy8gRXhwb3J0IGEgbW9kdWxlLXNjb3BlZCBNb25nb0NsaWVudCBwcm9taXNlLiBCeSBkb2luZyB0aGlzIGluIGFcbi8vIHNlcGFyYXRlIG1vZHVsZSwgdGhlIGNsaWVudCBjYW4gYmUgc2hhcmVkIGFjcm9zcyBmdW5jdGlvbnMuXG5leHBvcnQgZGVmYXVsdCBjbGllbnRQcm9taXNlO1xuIl0sIm5hbWVzIjpbIk1vbmdvQ2xpZW50IiwicHJvY2VzcyIsImVudiIsIk1PTkdPREJfVVJJIiwiRXJyb3IiLCJ1cmkiLCJvcHRpb25zIiwiY2xpZW50IiwiY2xpZW50UHJvbWlzZSIsImdsb2JhbCIsIl9tb25nb0NsaWVudFByb21pc2UiLCJjb25uZWN0Il0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/mongodb.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/utils.ts":
/*!**************************!*\
  !*** ./src/lib/utils.ts ***!
  \**************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   AuthUtils: () => (/* binding */ AuthUtils),\n/* harmony export */   JWT_EXPIRE: () => (/* binding */ JWT_EXPIRE),\n/* harmony export */   JWT_SECRET: () => (/* binding */ JWT_SECRET),\n/* harmony export */   PortfolioUtils: () => (/* binding */ PortfolioUtils),\n/* harmony export */   Utils: () => (/* binding */ Utils),\n/* harmony export */   Validator: () => (/* binding */ Validator),\n/* harmony export */   corsResponse: () => (/* binding */ corsResponse),\n/* harmony export */   handleCorsOptions: () => (/* binding */ handleCorsOptions)\n/* harmony export */ });\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! bcryptjs */ \"(rsc)/./node_modules/bcryptjs/index.js\");\n/* harmony import */ var bcryptjs__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(bcryptjs__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! jsonwebtoken */ \"(rsc)/./node_modules/jsonwebtoken/index.js\");\n/* harmony import */ var jsonwebtoken__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(jsonwebtoken__WEBPACK_IMPORTED_MODULE_1__);\n\n\n// JWT Secret key (should be in environment variables)\nconst JWT_SECRET = process.env.JWT_SECRET || \"your-secret-key-change-this-in-production\";\nconst JWT_EXPIRE = process.env.JWT_EXPIRE || \"7d\";\n// Authentication utilities\nclass AuthUtils {\n    // Hash password\n    static async hashPassword(password) {\n        const saltRounds = 12;\n        return await bcryptjs__WEBPACK_IMPORTED_MODULE_0___default().hash(password, saltRounds);\n    }\n    // Compare password\n    static async comparePassword(password, hashedPassword) {\n        return await bcryptjs__WEBPACK_IMPORTED_MODULE_0___default().compare(password, hashedPassword);\n    }\n    // Generate JWT token\n    static generateToken(userId) {\n        return jsonwebtoken__WEBPACK_IMPORTED_MODULE_1___default().sign({\n            userId: userId.toString()\n        }, JWT_SECRET, {\n            expiresIn: \"7d\"\n        });\n    }\n    // Verify JWT token\n    static verifyToken(token) {\n        try {\n            const decoded = jsonwebtoken__WEBPACK_IMPORTED_MODULE_1___default().verify(token, JWT_SECRET);\n            return decoded;\n        } catch (error) {\n            return null;\n        }\n    }\n    // Extract token from Authorization header\n    static extractTokenFromHeader(authHeader) {\n        if (!authHeader || !authHeader.startsWith(\"Bearer \")) {\n            return null;\n        }\n        return authHeader.substring(7);\n    }\n}\n// Validation utilities\nclass Validator {\n    // Email validation\n    static validateEmail(email) {\n        const errors = [];\n        if (!email) {\n            errors.push(\"Email is required\");\n        } else {\n            const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n            if (!emailRegex.test(email)) {\n                errors.push(\"Invalid email format\");\n            }\n        }\n        return {\n            isValid: errors.length === 0,\n            errors\n        };\n    }\n    // Password validation\n    static validatePassword(password) {\n        const errors = [];\n        if (!password) {\n            errors.push(\"Password is required\");\n        } else {\n            if (password.length < 6) {\n                errors.push(\"Password must be at least 6 characters long\");\n            }\n            if (password.length > 100) {\n                errors.push(\"Password must be less than 100 characters\");\n            }\n        }\n        return {\n            isValid: errors.length === 0,\n            errors\n        };\n    }\n    // Username validation\n    static validateUsername(username) {\n        const errors = [];\n        if (!username) {\n            errors.push(\"Username is required\");\n        } else {\n            if (username.length < 3) {\n                errors.push(\"Username must be at least 3 characters long\");\n            }\n            if (username.length > 30) {\n                errors.push(\"Username must be less than 30 characters\");\n            }\n            if (!/^[a-zA-Z0-9_]+$/.test(username)) {\n                errors.push(\"Username can only contain letters, numbers, and underscores\");\n            }\n        }\n        return {\n            isValid: errors.length === 0,\n            errors\n        };\n    }\n    // Coin validation\n    static validateCoin(coinData) {\n        const errors = [];\n        if (!coinData.symbol || coinData.symbol.trim().length === 0) {\n            errors.push(\"Coin symbol is required\");\n        } else if (coinData.symbol.length > 10) {\n            errors.push(\"Coin symbol must be less than 10 characters\");\n        }\n        if (!coinData.name || coinData.name.trim().length === 0) {\n            errors.push(\"Coin name is required\");\n        } else if (coinData.name.length > 100) {\n            errors.push(\"Coin name must be less than 100 characters\");\n        }\n        if (coinData.quantity === undefined || coinData.quantity === null) {\n            errors.push(\"Quantity is required\");\n        } else if (coinData.quantity <= 0) {\n            errors.push(\"Quantity must be greater than 0\");\n        }\n        if (coinData.averageBuyPrice === undefined || coinData.averageBuyPrice === null) {\n            errors.push(\"Average buy price is required\");\n        } else if (coinData.averageBuyPrice <= 0) {\n            errors.push(\"Average buy price must be greater than 0\");\n        }\n        if (coinData.currentPrice !== undefined && coinData.currentPrice < 0) {\n            errors.push(\"Current price cannot be negative\");\n        }\n        return {\n            isValid: errors.length === 0,\n            errors\n        };\n    }\n}\n// Portfolio calculation utilities\nclass PortfolioUtils {\n    // Calculate profit/loss for a single coin\n    static calculateCoinProfitLoss(coin) {\n        const currentPrice = coin.currentPrice || 0;\n        const currentValue = coin.quantity * currentPrice;\n        const profitLoss = currentValue - coin.totalInvested;\n        const profitLossPercentage = coin.totalInvested > 0 ? profitLoss / coin.totalInvested * 100 : 0;\n        return {\n            profitLoss: Number(profitLoss.toFixed(2)),\n            profitLossPercentage: Number(profitLossPercentage.toFixed(2)),\n            currentValue: Number(currentValue.toFixed(2))\n        };\n    }\n    // Calculate portfolio summary\n    static calculatePortfolioSummary(coins) {\n        let totalInvested = 0;\n        let currentValue = 0;\n        let topPerformer;\n        let worstPerformer;\n        let maxGain = -Infinity;\n        let maxLoss = Infinity;\n        coins.forEach((coin)=>{\n            const calc = this.calculateCoinProfitLoss(coin);\n            totalInvested += coin.totalInvested;\n            currentValue += calc.currentValue;\n            // Find top and worst performers\n            if (calc.profitLossPercentage > maxGain) {\n                maxGain = calc.profitLossPercentage;\n                topPerformer = {\n                    symbol: coin.symbol,\n                    name: coin.name,\n                    profitLossPercentage: calc.profitLossPercentage\n                };\n            }\n            if (calc.profitLossPercentage < maxLoss) {\n                maxLoss = calc.profitLossPercentage;\n                worstPerformer = {\n                    symbol: coin.symbol,\n                    name: coin.name,\n                    profitLossPercentage: calc.profitLossPercentage\n                };\n            }\n        });\n        const totalProfitLoss = currentValue - totalInvested;\n        const totalProfitLossPercentage = totalInvested > 0 ? totalProfitLoss / totalInvested * 100 : 0;\n        return {\n            userId: coins[0]?.userId || \"\",\n            totalInvested: Number(totalInvested.toFixed(2)),\n            currentValue: Number(currentValue.toFixed(2)),\n            totalProfitLoss: Number(totalProfitLoss.toFixed(2)),\n            totalProfitLossPercentage: Number(totalProfitLossPercentage.toFixed(2)),\n            coinCount: coins.length,\n            topPerformer,\n            worstPerformer,\n            lastUpdated: new Date()\n        };\n    }\n    // Update coin with new price\n    static updateCoinPrice(coin, newPrice) {\n        const calc = this.calculateCoinProfitLoss({\n            ...coin,\n            currentPrice: newPrice\n        });\n        return {\n            ...coin,\n            currentPrice: newPrice,\n            currentValue: calc.currentValue,\n            profitLoss: calc.profitLoss,\n            profitLossPercentage: calc.profitLossPercentage,\n            lastPriceUpdate: new Date(),\n            updatedAt: new Date()\n        };\n    }\n    // Calculate new average buy price when adding more coins\n    static calculateNewAveragePrice(currentQuantity, currentAvgPrice, newQuantity, newPrice) {\n        const totalValue = currentQuantity * currentAvgPrice + newQuantity * newPrice;\n        const totalQuantity = currentQuantity + newQuantity;\n        return Number((totalValue / totalQuantity).toFixed(8));\n    }\n}\n// General utilities\nclass Utils {\n    // Format currency\n    static formatCurrency(amount, currency = \"USD\") {\n        return new Intl.NumberFormat(\"en-US\", {\n            style: \"currency\",\n            currency: currency\n        }).format(amount);\n    }\n    // Format percentage\n    static formatPercentage(percentage) {\n        const sign = percentage >= 0 ? \"+\" : \"\";\n        return `${sign}${percentage.toFixed(2)}%`;\n    }\n    // Format large numbers\n    static formatNumber(num) {\n        if (num >= 1e9) {\n            return (num / 1e9).toFixed(2) + \"B\";\n        }\n        if (num >= 1e6) {\n            return (num / 1e6).toFixed(2) + \"M\";\n        }\n        if (num >= 1e3) {\n            return (num / 1e3).toFixed(2) + \"K\";\n        }\n        return num.toFixed(2);\n    }\n    // Generate random string\n    static generateRandomString(length) {\n        const chars = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\n        let result = \"\";\n        for(let i = 0; i < length; i++){\n            result += chars.charAt(Math.floor(Math.random() * chars.length));\n        }\n        return result;\n    }\n    // Clean string for database\n    static sanitizeString(str) {\n        return str.trim().replace(/\\s+/g, \" \");\n    }\n}\n// CORS helper function\nfunction corsResponse(response) {\n    response.headers.set(\"Access-Control-Allow-Origin\", \"*\");\n    response.headers.set(\"Access-Control-Allow-Methods\", \"GET, POST, PUT, DELETE, OPTIONS\");\n    response.headers.set(\"Access-Control-Allow-Headers\", \"Content-Type, Authorization\");\n    return response;\n}\n// Handle OPTIONS request for CORS preflight\nfunction handleCorsOptions() {\n    const response = new NextResponse(null, {\n        status: 200\n    });\n    response.headers.set(\"Access-Control-Allow-Origin\", \"*\");\n    response.headers.set(\"Access-Control-Allow-Methods\", \"GET, POST, PUT, DELETE, OPTIONS\");\n    response.headers.set(\"Access-Control-Allow-Headers\", \"Content-Type, Authorization\");\n    return response;\n}\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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TyxDQUFDLFFBQVE7SUFDcEM7QUFDRjtBQUVBLHVCQUF1QjtBQUNoQixTQUFTQyxhQUFhQyxRQUFzQjtJQUNqREEsU0FBU0MsT0FBTyxDQUFDQyxHQUFHLENBQUMsK0JBQStCO0lBQ3BERixTQUFTQyxPQUFPLENBQUNDLEdBQUcsQ0FDbEIsZ0NBQ0E7SUFFRkYsU0FBU0MsT0FBTyxDQUFDQyxHQUFHLENBQ2xCLGdDQUNBO0lBRUYsT0FBT0Y7QUFDVDtBQUVBLDRDQUE0QztBQUNyQyxTQUFTRztJQUNkLE1BQU1ILFdBQVcsSUFBSUksYUFBYSxNQUFNO1FBQUVDLFFBQVE7SUFBSTtJQUN0REwsU0FBU0MsT0FBTyxDQUFDQyxHQUFHLENBQUMsK0JBQStCO0lBQ3BERixTQUFTQyxPQUFPLENBQUNDLEdBQUcsQ0FDbEIsZ0NBQ0E7SUFFRkYsU0FBU0MsT0FBTyxDQUFDQyxHQUFHLENBQ2xCLGdDQUNBO0lBRUYsT0FBT0Y7QUFDVDtBQUVrQyIsInNvdXJjZXMiOlsid2VicGFjazovL25leHRqcy1tb25nb2RiLWFwaS8uL3NyYy9saWIvdXRpbHMudHM/N2MxYyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgYmNyeXB0IGZyb20gXCJiY3J5cHRqc1wiO1xuaW1wb3J0IGp3dCBmcm9tIFwianNvbndlYnRva2VuXCI7XG5pbXBvcnQgeyBPYmplY3RJZCB9IGZyb20gXCJtb25nb2RiXCI7XG5pbXBvcnQgeyBVc2VyLCBDb2luLCBQb3J0Zm9saW8gfSBmcm9tIFwiQC90eXBlc1wiO1xuXG4vLyBKV1QgU2VjcmV0IGtleSAoc2hvdWxkIGJlIGluIGVudmlyb25tZW50IHZhcmlhYmxlcylcbmNvbnN0IEpXVF9TRUNSRVQgPVxuICBwcm9jZXNzLmVudi5KV1RfU0VDUkVUIHx8IFwieW91ci1zZWNyZXQta2V5LWNoYW5nZS10aGlzLWluLXByb2R1Y3Rpb25cIjtcbmNvbnN0IEpXVF9FWFBJUkUgPSBwcm9jZXNzLmVudi5KV1RfRVhQSVJFIHx8IFwiN2RcIjtcblxuLy8gVmFsaWRhdGlvbiB1dGlsaXRpZXMgZm9yIGZvcm0gZGF0YSBhbmQgQVBJIGlucHV0c1xuZXhwb3J0IGludGVyZmFjZSBWYWxpZGF0aW9uUmVzdWx0IHtcbiAgaXNWYWxpZDogYm9vbGVhbjtcbiAgZXJyb3JzOiBzdHJpbmdbXTtcbn1cblxuLy8gQXV0aGVudGljYXRpb24gdXRpbGl0aWVzXG5leHBvcnQgY2xhc3MgQXV0aFV0aWxzIHtcbiAgLy8gSGFzaCBwYXNzd29yZFxuICBzdGF0aWMgYXN5bmMgaGFzaFBhc3N3b3JkKHBhc3N3b3JkOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIGNvbnN0IHNhbHRSb3VuZHMgPSAxMjtcbiAgICByZXR1cm4gYXdhaXQgYmNyeXB0Lmhhc2gocGFzc3dvcmQsIHNhbHRSb3VuZHMpO1xuICB9XG5cbiAgLy8gQ29tcGFyZSBwYXNzd29yZFxuICBzdGF0aWMgYXN5bmMgY29tcGFyZVBhc3N3b3JkKFxuICAgIHBhc3N3b3JkOiBzdHJpbmcsXG4gICAgaGFzaGVkUGFzc3dvcmQ6IHN0cmluZ1xuICApOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICByZXR1cm4gYXdhaXQgYmNyeXB0LmNvbXBhcmUocGFzc3dvcmQsIGhhc2hlZFBhc3N3b3JkKTtcbiAgfVxuXG4gIC8vIEdlbmVyYXRlIEpXVCB0b2tlblxuICBzdGF0aWMgZ2VuZXJhdGVUb2tlbih1c2VySWQ6IHN0cmluZyB8IE9iamVjdElkKTogc3RyaW5nIHtcbiAgICByZXR1cm4gand0LnNpZ24oeyB1c2VySWQ6IHVzZXJJZC50b1N0cmluZygpIH0sIEpXVF9TRUNSRVQsIHtcbiAgICAgIGV4cGlyZXNJbjogXCI3ZFwiLFxuICAgIH0pO1xuICB9XG5cbiAgLy8gVmVyaWZ5IEpXVCB0b2tlblxuICBzdGF0aWMgdmVyaWZ5VG9rZW4odG9rZW46IHN0cmluZyk6IHsgdXNlcklkOiBzdHJpbmcgfSB8IG51bGwge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBkZWNvZGVkID0gand0LnZlcmlmeSh0b2tlbiwgSldUX1NFQ1JFVCkgYXMgeyB1c2VySWQ6IHN0cmluZyB9O1xuICAgICAgcmV0dXJuIGRlY29kZWQ7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgfVxuXG4gIC8vIEV4dHJhY3QgdG9rZW4gZnJvbSBBdXRob3JpemF0aW9uIGhlYWRlclxuICBzdGF0aWMgZXh0cmFjdFRva2VuRnJvbUhlYWRlcihhdXRoSGVhZGVyOiBzdHJpbmcgfCBudWxsKTogc3RyaW5nIHwgbnVsbCB7XG4gICAgaWYgKCFhdXRoSGVhZGVyIHx8ICFhdXRoSGVhZGVyLnN0YXJ0c1dpdGgoXCJCZWFyZXIgXCIpKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgcmV0dXJuIGF1dGhIZWFkZXIuc3Vic3RyaW5nKDcpO1xuICB9XG59XG5cbi8vIFZhbGlkYXRpb24gdXRpbGl0aWVzXG5leHBvcnQgY2xhc3MgVmFsaWRhdG9yIHtcbiAgLy8gRW1haWwgdmFsaWRhdGlvblxuICBzdGF0aWMgdmFsaWRhdGVFbWFpbChlbWFpbDogc3RyaW5nKTogVmFsaWRhdGlvblJlc3VsdCB7XG4gICAgY29uc3QgZXJyb3JzOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgaWYgKCFlbWFpbCkge1xuICAgICAgZXJyb3JzLnB1c2goXCJFbWFpbCBpcyByZXF1aXJlZFwiKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgZW1haWxSZWdleCA9IC9eW15cXHNAXStAW15cXHNAXStcXC5bXlxcc0BdKyQvO1xuICAgICAgaWYgKCFlbWFpbFJlZ2V4LnRlc3QoZW1haWwpKSB7XG4gICAgICAgIGVycm9ycy5wdXNoKFwiSW52YWxpZCBlbWFpbCBmb3JtYXRcIik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIGlzVmFsaWQ6IGVycm9ycy5sZW5ndGggPT09IDAsXG4gICAgICBlcnJvcnMsXG4gICAgfTtcbiAgfVxuXG4gIC8vIFBhc3N3b3JkIHZhbGlkYXRpb25cbiAgc3RhdGljIHZhbGlkYXRlUGFzc3dvcmQocGFzc3dvcmQ6IHN0cmluZyk6IFZhbGlkYXRpb25SZXN1bHQge1xuICAgIGNvbnN0IGVycm9yczogc3RyaW5nW10gPSBbXTtcblxuICAgIGlmICghcGFzc3dvcmQpIHtcbiAgICAgIGVycm9ycy5wdXNoKFwiUGFzc3dvcmQgaXMgcmVxdWlyZWRcIik7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChwYXNzd29yZC5sZW5ndGggPCA2KSB7XG4gICAgICAgIGVycm9ycy5wdXNoKFwiUGFzc3dvcmQgbXVzdCBiZSBhdCBsZWFzdCA2IGNoYXJhY3RlcnMgbG9uZ1wiKTtcbiAgICAgIH1cbiAgICAgIGlmIChwYXNzd29yZC5sZW5ndGggPiAxMDApIHtcbiAgICAgICAgZXJyb3JzLnB1c2goXCJQYXNzd29yZCBtdXN0IGJlIGxlc3MgdGhhbiAxMDAgY2hhcmFjdGVyc1wiKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgaXNWYWxpZDogZXJyb3JzLmxlbmd0aCA9PT0gMCxcbiAgICAgIGVycm9ycyxcbiAgICB9O1xuICB9XG5cbiAgLy8gVXNlcm5hbWUgdmFsaWRhdGlvblxuICBzdGF0aWMgdmFsaWRhdGVVc2VybmFtZSh1c2VybmFtZTogc3RyaW5nKTogVmFsaWRhdGlvblJlc3VsdCB7XG4gICAgY29uc3QgZXJyb3JzOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgaWYgKCF1c2VybmFtZSkge1xuICAgICAgZXJyb3JzLnB1c2goXCJVc2VybmFtZSBpcyByZXF1aXJlZFwiKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWYgKHVzZXJuYW1lLmxlbmd0aCA8IDMpIHtcbiAgICAgICAgZXJyb3JzLnB1c2goXCJVc2VybmFtZSBtdXN0IGJlIGF0IGxlYXN0IDMgY2hhcmFjdGVycyBsb25nXCIpO1xuICAgICAgfVxuICAgICAgaWYgKHVzZXJuYW1lLmxlbmd0aCA+IDMwKSB7XG4gICAgICAgIGVycm9ycy5wdXNoKFwiVXNlcm5hbWUgbXVzdCBiZSBsZXNzIHRoYW4gMzAgY2hhcmFjdGVyc1wiKTtcbiAgICAgIH1cbiAgICAgIGlmICghL15bYS16QS1aMC05X10rJC8udGVzdCh1c2VybmFtZSkpIHtcbiAgICAgICAgZXJyb3JzLnB1c2goXG4gICAgICAgICAgXCJVc2VybmFtZSBjYW4gb25seSBjb250YWluIGxldHRlcnMsIG51bWJlcnMsIGFuZCB1bmRlcnNjb3Jlc1wiXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIGlzVmFsaWQ6IGVycm9ycy5sZW5ndGggPT09IDAsXG4gICAgICBlcnJvcnMsXG4gICAgfTtcbiAgfVxuXG4gIC8vIENvaW4gdmFsaWRhdGlvblxuICBzdGF0aWMgdmFsaWRhdGVDb2luKGNvaW5EYXRhOiB7XG4gICAgc3ltYm9sPzogc3RyaW5nO1xuICAgIG5hbWU/OiBzdHJpbmc7XG4gICAgcXVhbnRpdHk/OiBudW1iZXI7XG4gICAgYXZlcmFnZUJ1eVByaWNlPzogbnVtYmVyO1xuICAgIGN1cnJlbnRQcmljZT86IG51bWJlcjtcbiAgfSk6IFZhbGlkYXRpb25SZXN1bHQge1xuICAgIGNvbnN0IGVycm9yczogc3RyaW5nW10gPSBbXTtcblxuICAgIGlmICghY29pbkRhdGEuc3ltYm9sIHx8IGNvaW5EYXRhLnN5bWJvbC50cmltKCkubGVuZ3RoID09PSAwKSB7XG4gICAgICBlcnJvcnMucHVzaChcIkNvaW4gc3ltYm9sIGlzIHJlcXVpcmVkXCIpO1xuICAgIH0gZWxzZSBpZiAoY29pbkRhdGEuc3ltYm9sLmxlbmd0aCA+IDEwKSB7XG4gICAgICBlcnJvcnMucHVzaChcIkNvaW4gc3ltYm9sIG11c3QgYmUgbGVzcyB0aGFuIDEwIGNoYXJhY3RlcnNcIik7XG4gICAgfVxuXG4gICAgaWYgKCFjb2luRGF0YS5uYW1lIHx8IGNvaW5EYXRhLm5hbWUudHJpbSgpLmxlbmd0aCA9PT0gMCkge1xuICAgICAgZXJyb3JzLnB1c2goXCJDb2luIG5hbWUgaXMgcmVxdWlyZWRcIik7XG4gICAgfSBlbHNlIGlmIChjb2luRGF0YS5uYW1lLmxlbmd0aCA+IDEwMCkge1xuICAgICAgZXJyb3JzLnB1c2goXCJDb2luIG5hbWUgbXVzdCBiZSBsZXNzIHRoYW4gMTAwIGNoYXJhY3RlcnNcIik7XG4gICAgfVxuXG4gICAgaWYgKGNvaW5EYXRhLnF1YW50aXR5ID09PSB1bmRlZmluZWQgfHwgY29pbkRhdGEucXVhbnRpdHkgPT09IG51bGwpIHtcbiAgICAgIGVycm9ycy5wdXNoKFwiUXVhbnRpdHkgaXMgcmVxdWlyZWRcIik7XG4gICAgfSBlbHNlIGlmIChjb2luRGF0YS5xdWFudGl0eSA8PSAwKSB7XG4gICAgICBlcnJvcnMucHVzaChcIlF1YW50aXR5IG11c3QgYmUgZ3JlYXRlciB0aGFuIDBcIik7XG4gICAgfVxuXG4gICAgaWYgKFxuICAgICAgY29pbkRhdGEuYXZlcmFnZUJ1eVByaWNlID09PSB1bmRlZmluZWQgfHxcbiAgICAgIGNvaW5EYXRhLmF2ZXJhZ2VCdXlQcmljZSA9PT0gbnVsbFxuICAgICkge1xuICAgICAgZXJyb3JzLnB1c2goXCJBdmVyYWdlIGJ1eSBwcmljZSBpcyByZXF1aXJlZFwiKTtcbiAgICB9IGVsc2UgaWYgKGNvaW5EYXRhLmF2ZXJhZ2VCdXlQcmljZSA8PSAwKSB7XG4gICAgICBlcnJvcnMucHVzaChcIkF2ZXJhZ2UgYnV5IHByaWNlIG11c3QgYmUgZ3JlYXRlciB0aGFuIDBcIik7XG4gICAgfVxuXG4gICAgaWYgKGNvaW5EYXRhLmN1cnJlbnRQcmljZSAhPT0gdW5kZWZpbmVkICYmIGNvaW5EYXRhLmN1cnJlbnRQcmljZSA8IDApIHtcbiAgICAgIGVycm9ycy5wdXNoKFwiQ3VycmVudCBwcmljZSBjYW5ub3QgYmUgbmVnYXRpdmVcIik7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIGlzVmFsaWQ6IGVycm9ycy5sZW5ndGggPT09IDAsXG4gICAgICBlcnJvcnMsXG4gICAgfTtcbiAgfVxufVxuXG4vLyBQb3J0Zm9saW8gY2FsY3VsYXRpb24gdXRpbGl0aWVzXG5leHBvcnQgY2xhc3MgUG9ydGZvbGlvVXRpbHMge1xuICAvLyBDYWxjdWxhdGUgcHJvZml0L2xvc3MgZm9yIGEgc2luZ2xlIGNvaW5cbiAgc3RhdGljIGNhbGN1bGF0ZUNvaW5Qcm9maXRMb3NzKGNvaW46IENvaW4pOiB7XG4gICAgcHJvZml0TG9zczogbnVtYmVyO1xuICAgIHByb2ZpdExvc3NQZXJjZW50YWdlOiBudW1iZXI7XG4gICAgY3VycmVudFZhbHVlOiBudW1iZXI7XG4gIH0ge1xuICAgIGNvbnN0IGN1cnJlbnRQcmljZSA9IGNvaW4uY3VycmVudFByaWNlIHx8IDA7XG4gICAgY29uc3QgY3VycmVudFZhbHVlID0gY29pbi5xdWFudGl0eSAqIGN1cnJlbnRQcmljZTtcbiAgICBjb25zdCBwcm9maXRMb3NzID0gY3VycmVudFZhbHVlIC0gY29pbi50b3RhbEludmVzdGVkO1xuICAgIGNvbnN0IHByb2ZpdExvc3NQZXJjZW50YWdlID1cbiAgICAgIGNvaW4udG90YWxJbnZlc3RlZCA+IDAgPyAocHJvZml0TG9zcyAvIGNvaW4udG90YWxJbnZlc3RlZCkgKiAxMDAgOiAwO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIHByb2ZpdExvc3M6IE51bWJlcihwcm9maXRMb3NzLnRvRml4ZWQoMikpLFxuICAgICAgcHJvZml0TG9zc1BlcmNlbnRhZ2U6IE51bWJlcihwcm9maXRMb3NzUGVyY2VudGFnZS50b0ZpeGVkKDIpKSxcbiAgICAgIGN1cnJlbnRWYWx1ZTogTnVtYmVyKGN1cnJlbnRWYWx1ZS50b0ZpeGVkKDIpKSxcbiAgICB9O1xuICB9XG5cbiAgLy8gQ2FsY3VsYXRlIHBvcnRmb2xpbyBzdW1tYXJ5XG4gIHN0YXRpYyBjYWxjdWxhdGVQb3J0Zm9saW9TdW1tYXJ5KGNvaW5zOiBDb2luW10pOiBQb3J0Zm9saW8ge1xuICAgIGxldCB0b3RhbEludmVzdGVkID0gMDtcbiAgICBsZXQgY3VycmVudFZhbHVlID0gMDtcbiAgICBsZXQgdG9wUGVyZm9ybWVyOiBQb3J0Zm9saW9bXCJ0b3BQZXJmb3JtZXJcIl07XG4gICAgbGV0IHdvcnN0UGVyZm9ybWVyOiBQb3J0Zm9saW9bXCJ3b3JzdFBlcmZvcm1lclwiXTtcbiAgICBsZXQgbWF4R2FpbiA9IC1JbmZpbml0eTtcbiAgICBsZXQgbWF4TG9zcyA9IEluZmluaXR5O1xuXG4gICAgY29pbnMuZm9yRWFjaCgoY29pbikgPT4ge1xuICAgICAgY29uc3QgY2FsYyA9IHRoaXMuY2FsY3VsYXRlQ29pblByb2ZpdExvc3MoY29pbik7XG5cbiAgICAgIHRvdGFsSW52ZXN0ZWQgKz0gY29pbi50b3RhbEludmVzdGVkO1xuICAgICAgY3VycmVudFZhbHVlICs9IGNhbGMuY3VycmVudFZhbHVlO1xuXG4gICAgICAvLyBGaW5kIHRvcCBhbmQgd29yc3QgcGVyZm9ybWVyc1xuICAgICAgaWYgKGNhbGMucHJvZml0TG9zc1BlcmNlbnRhZ2UgPiBtYXhHYWluKSB7XG4gICAgICAgIG1heEdhaW4gPSBjYWxjLnByb2ZpdExvc3NQZXJjZW50YWdlO1xuICAgICAgICB0b3BQZXJmb3JtZXIgPSB7XG4gICAgICAgICAgc3ltYm9sOiBjb2luLnN5bWJvbCxcbiAgICAgICAgICBuYW1lOiBjb2luLm5hbWUsXG4gICAgICAgICAgcHJvZml0TG9zc1BlcmNlbnRhZ2U6IGNhbGMucHJvZml0TG9zc1BlcmNlbnRhZ2UsXG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIGlmIChjYWxjLnByb2ZpdExvc3NQZXJjZW50YWdlIDwgbWF4TG9zcykge1xuICAgICAgICBtYXhMb3NzID0gY2FsYy5wcm9maXRMb3NzUGVyY2VudGFnZTtcbiAgICAgICAgd29yc3RQZXJmb3JtZXIgPSB7XG4gICAgICAgICAgc3ltYm9sOiBjb2luLnN5bWJvbCxcbiAgICAgICAgICBuYW1lOiBjb2luLm5hbWUsXG4gICAgICAgICAgcHJvZml0TG9zc1BlcmNlbnRhZ2U6IGNhbGMucHJvZml0TG9zc1BlcmNlbnRhZ2UsXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBjb25zdCB0b3RhbFByb2ZpdExvc3MgPSBjdXJyZW50VmFsdWUgLSB0b3RhbEludmVzdGVkO1xuICAgIGNvbnN0IHRvdGFsUHJvZml0TG9zc1BlcmNlbnRhZ2UgPVxuICAgICAgdG90YWxJbnZlc3RlZCA+IDAgPyAodG90YWxQcm9maXRMb3NzIC8gdG90YWxJbnZlc3RlZCkgKiAxMDAgOiAwO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIHVzZXJJZDogY29pbnNbMF0/LnVzZXJJZCB8fCBcIlwiLFxuICAgICAgdG90YWxJbnZlc3RlZDogTnVtYmVyKHRvdGFsSW52ZXN0ZWQudG9GaXhlZCgyKSksXG4gICAgICBjdXJyZW50VmFsdWU6IE51bWJlcihjdXJyZW50VmFsdWUudG9GaXhlZCgyKSksXG4gICAgICB0b3RhbFByb2ZpdExvc3M6IE51bWJlcih0b3RhbFByb2ZpdExvc3MudG9GaXhlZCgyKSksXG4gICAgICB0b3RhbFByb2ZpdExvc3NQZXJjZW50YWdlOiBOdW1iZXIodG90YWxQcm9maXRMb3NzUGVyY2VudGFnZS50b0ZpeGVkKDIpKSxcbiAgICAgIGNvaW5Db3VudDogY29pbnMubGVuZ3RoLFxuICAgICAgdG9wUGVyZm9ybWVyLFxuICAgICAgd29yc3RQZXJmb3JtZXIsXG4gICAgICBsYXN0VXBkYXRlZDogbmV3IERhdGUoKSxcbiAgICB9O1xuICB9XG5cbiAgLy8gVXBkYXRlIGNvaW4gd2l0aCBuZXcgcHJpY2VcbiAgc3RhdGljIHVwZGF0ZUNvaW5QcmljZShjb2luOiBDb2luLCBuZXdQcmljZTogbnVtYmVyKTogQ29pbiB7XG4gICAgY29uc3QgY2FsYyA9IHRoaXMuY2FsY3VsYXRlQ29pblByb2ZpdExvc3Moe1xuICAgICAgLi4uY29pbixcbiAgICAgIGN1cnJlbnRQcmljZTogbmV3UHJpY2UsXG4gICAgfSk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgLi4uY29pbixcbiAgICAgIGN1cnJlbnRQcmljZTogbmV3UHJpY2UsXG4gICAgICBjdXJyZW50VmFsdWU6IGNhbGMuY3VycmVudFZhbHVlLFxuICAgICAgcHJvZml0TG9zczogY2FsYy5wcm9maXRMb3NzLFxuICAgICAgcHJvZml0TG9zc1BlcmNlbnRhZ2U6IGNhbGMucHJvZml0TG9zc1BlcmNlbnRhZ2UsXG4gICAgICBsYXN0UHJpY2VVcGRhdGU6IG5ldyBEYXRlKCksXG4gICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgfTtcbiAgfVxuXG4gIC8vIENhbGN1bGF0ZSBuZXcgYXZlcmFnZSBidXkgcHJpY2Ugd2hlbiBhZGRpbmcgbW9yZSBjb2luc1xuICBzdGF0aWMgY2FsY3VsYXRlTmV3QXZlcmFnZVByaWNlKFxuICAgIGN1cnJlbnRRdWFudGl0eTogbnVtYmVyLFxuICAgIGN1cnJlbnRBdmdQcmljZTogbnVtYmVyLFxuICAgIG5ld1F1YW50aXR5OiBudW1iZXIsXG4gICAgbmV3UHJpY2U6IG51bWJlclxuICApOiBudW1iZXIge1xuICAgIGNvbnN0IHRvdGFsVmFsdWUgPVxuICAgICAgY3VycmVudFF1YW50aXR5ICogY3VycmVudEF2Z1ByaWNlICsgbmV3UXVhbnRpdHkgKiBuZXdQcmljZTtcbiAgICBjb25zdCB0b3RhbFF1YW50aXR5ID0gY3VycmVudFF1YW50aXR5ICsgbmV3UXVhbnRpdHk7XG4gICAgcmV0dXJuIE51bWJlcigodG90YWxWYWx1ZSAvIHRvdGFsUXVhbnRpdHkpLnRvRml4ZWQoOCkpO1xuICB9XG59XG5cbi8vIEdlbmVyYWwgdXRpbGl0aWVzXG5leHBvcnQgY2xhc3MgVXRpbHMge1xuICAvLyBGb3JtYXQgY3VycmVuY3lcbiAgc3RhdGljIGZvcm1hdEN1cnJlbmN5KGFtb3VudDogbnVtYmVyLCBjdXJyZW5jeTogc3RyaW5nID0gXCJVU0RcIik6IHN0cmluZyB7XG4gICAgcmV0dXJuIG5ldyBJbnRsLk51bWJlckZvcm1hdChcImVuLVVTXCIsIHtcbiAgICAgIHN0eWxlOiBcImN1cnJlbmN5XCIsXG4gICAgICBjdXJyZW5jeTogY3VycmVuY3ksXG4gICAgfSkuZm9ybWF0KGFtb3VudCk7XG4gIH1cblxuICAvLyBGb3JtYXQgcGVyY2VudGFnZVxuICBzdGF0aWMgZm9ybWF0UGVyY2VudGFnZShwZXJjZW50YWdlOiBudW1iZXIpOiBzdHJpbmcge1xuICAgIGNvbnN0IHNpZ24gPSBwZXJjZW50YWdlID49IDAgPyBcIitcIiA6IFwiXCI7XG4gICAgcmV0dXJuIGAke3NpZ259JHtwZXJjZW50YWdlLnRvRml4ZWQoMil9JWA7XG4gIH1cblxuICAvLyBGb3JtYXQgbGFyZ2UgbnVtYmVyc1xuICBzdGF0aWMgZm9ybWF0TnVtYmVyKG51bTogbnVtYmVyKTogc3RyaW5nIHtcbiAgICBpZiAobnVtID49IDFlOSkge1xuICAgICAgcmV0dXJuIChudW0gLyAxZTkpLnRvRml4ZWQoMikgKyBcIkJcIjtcbiAgICB9XG4gICAgaWYgKG51bSA+PSAxZTYpIHtcbiAgICAgIHJldHVybiAobnVtIC8gMWU2KS50b0ZpeGVkKDIpICsgXCJNXCI7XG4gICAgfVxuICAgIGlmIChudW0gPj0gMWUzKSB7XG4gICAgICByZXR1cm4gKG51bSAvIDFlMykudG9GaXhlZCgyKSArIFwiS1wiO1xuICAgIH1cbiAgICByZXR1cm4gbnVtLnRvRml4ZWQoMik7XG4gIH1cblxuICAvLyBHZW5lcmF0ZSByYW5kb20gc3RyaW5nXG4gIHN0YXRpYyBnZW5lcmF0ZVJhbmRvbVN0cmluZyhsZW5ndGg6IG51bWJlcik6IHN0cmluZyB7XG4gICAgY29uc3QgY2hhcnMgPVxuICAgICAgXCJBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OVwiO1xuICAgIGxldCByZXN1bHQgPSBcIlwiO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgIHJlc3VsdCArPSBjaGFycy5jaGFyQXQoTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogY2hhcnMubGVuZ3RoKSk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH1cblxuICAvLyBDbGVhbiBzdHJpbmcgZm9yIGRhdGFiYXNlXG4gIHN0YXRpYyBzYW5pdGl6ZVN0cmluZyhzdHI6IHN0cmluZyk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHN0ci50cmltKCkucmVwbGFjZSgvXFxzKy9nLCBcIiBcIik7XG4gIH1cbn1cblxuLy8gQ09SUyBoZWxwZXIgZnVuY3Rpb25cbmV4cG9ydCBmdW5jdGlvbiBjb3JzUmVzcG9uc2UocmVzcG9uc2U6IE5leHRSZXNwb25zZSkge1xuICByZXNwb25zZS5oZWFkZXJzLnNldChcIkFjY2Vzcy1Db250cm9sLUFsbG93LU9yaWdpblwiLCBcIipcIik7XG4gIHJlc3BvbnNlLmhlYWRlcnMuc2V0KFxuICAgIFwiQWNjZXNzLUNvbnRyb2wtQWxsb3ctTWV0aG9kc1wiLFxuICAgIFwiR0VULCBQT1NULCBQVVQsIERFTEVURSwgT1BUSU9OU1wiXG4gICk7XG4gIHJlc3BvbnNlLmhlYWRlcnMuc2V0KFxuICAgIFwiQWNjZXNzLUNvbnRyb2wtQWxsb3ctSGVhZGVyc1wiLFxuICAgIFwiQ29udGVudC1UeXBlLCBBdXRob3JpemF0aW9uXCJcbiAgKTtcbiAgcmV0dXJuIHJlc3BvbnNlO1xufVxuXG4vLyBIYW5kbGUgT1BUSU9OUyByZXF1ZXN0IGZvciBDT1JTIHByZWZsaWdodFxuZXhwb3J0IGZ1bmN0aW9uIGhhbmRsZUNvcnNPcHRpb25zKCkge1xuICBjb25zdCByZXNwb25zZSA9IG5ldyBOZXh0UmVzcG9uc2UobnVsbCwgeyBzdGF0dXM6IDIwMCB9KTtcbiAgcmVzcG9uc2UuaGVhZGVycy5zZXQoXCJBY2Nlc3MtQ29udHJvbC1BbGxvdy1PcmlnaW5cIiwgXCIqXCIpO1xuICByZXNwb25zZS5oZWFkZXJzLnNldChcbiAgICBcIkFjY2Vzcy1Db250cm9sLUFsbG93LU1ldGhvZHNcIixcbiAgICBcIkdFVCwgUE9TVCwgUFVULCBERUxFVEUsIE9QVElPTlNcIlxuICApO1xuICByZXNwb25zZS5oZWFkZXJzLnNldChcbiAgICBcIkFjY2Vzcy1Db250cm9sLUFsbG93LUhlYWRlcnNcIixcbiAgICBcIkNvbnRlbnQtVHlwZSwgQXV0aG9yaXphdGlvblwiXG4gICk7XG4gIHJldHVybiByZXNwb25zZTtcbn1cblxuZXhwb3J0IHsgSldUX1NFQ1JFVCwgSldUX0VYUElSRSB9O1xuIl0sIm5hbWVzIjpbImJjcnlwdCIsImp3dCIsIkpXVF9TRUNSRVQiLCJwcm9jZXNzIiwiZW52IiwiSldUX0VYUElSRSIsIkF1dGhVdGlscyIsImhhc2hQYXNzd29yZCIsInBhc3N3b3JkIiwic2FsdFJvdW5kcyIsImhhc2giLCJjb21wYXJlUGFzc3dvcmQiLCJoYXNoZWRQYXNzd29yZCIsImNvbXBhcmUiLCJnZW5lcmF0ZVRva2VuIiwidXNlcklkIiwic2lnbiIsInRvU3RyaW5nIiwiZXhwaXJlc0luIiwidmVyaWZ5VG9rZW4iLCJ0b2tlbiIsImRlY29kZWQiLCJ2ZXJpZnkiLCJlcnJvciIsImV4dHJhY3RUb2tlbkZyb21IZWFkZXIiLCJhdXRoSGVhZGVyIiwic3RhcnRzV2l0aCIsInN1YnN0cmluZyIsIlZhbGlkYXRvciIsInZhbGlkYXRlRW1haWwiLCJlbWFpbCIsImVycm9ycyIsInB1c2giLCJlbWFpbFJlZ2V4IiwidGVzdCIsImlzVmFsaWQiLCJsZW5ndGgiLCJ2YWxpZGF0ZVBhc3N3b3JkIiwidmFsaWRhdGVVc2VybmFtZSIsInVzZXJuYW1lIiwidmFsaWRhdGVDb2luIiwiY29pbkRhdGEiLCJzeW1ib2wiLCJ0cmltIiwibmFtZSIsInF1YW50aXR5IiwidW5kZWZpbmVkIiwiYXZlcmFnZUJ1eVByaWNlIiwiY3VycmVudFByaWNlIiwiUG9ydGZvbGlvVXRpbHMiLCJjYWxjdWxhdGVDb2luUHJvZml0TG9zcyIsImNvaW4iLCJjdXJyZW50VmFsdWUiLCJwcm9maXRMb3NzIiwidG90YWxJbnZlc3RlZCIsInByb2ZpdExvc3NQZXJjZW50YWdlIiwiTnVtYmVyIiwidG9GaXhlZCIsImNhbGN1bGF0ZVBvcnRmb2xpb1N1bW1hcnkiLCJjb2lucyIsInRvcFBlcmZvcm1lciIsIndvcnN0UGVyZm9ybWVyIiwibWF4R2FpbiIsIkluZmluaXR5IiwibWF4TG9zcyIsImZvckVhY2giLCJjYWxjIiwidG90YWxQcm9maXRMb3NzIiwidG90YWxQcm9maXRMb3NzUGVyY2VudGFnZSIsImNvaW5Db3VudCIsImxhc3RVcGRhdGVkIiwiRGF0ZSIsInVwZGF0ZUNvaW5QcmljZSIsIm5ld1ByaWNlIiwibGFzdFByaWNlVXBkYXRlIiwidXBkYXRlZEF0IiwiY2FsY3VsYXRlTmV3QXZlcmFnZVByaWNlIiwiY3VycmVudFF1YW50aXR5IiwiY3VycmVudEF2Z1ByaWNlIiwibmV3UXVhbnRpdHkiLCJ0b3RhbFZhbHVlIiwidG90YWxRdWFudGl0eSIsIlV0aWxzIiwiZm9ybWF0Q3VycmVuY3kiLCJhbW91bnQiLCJjdXJyZW5jeSIsIkludGwiLCJOdW1iZXJGb3JtYXQiLCJzdHlsZSIsImZvcm1hdCIsImZvcm1hdFBlcmNlbnRhZ2UiLCJwZXJjZW50YWdlIiwiZm9ybWF0TnVtYmVyIiwibnVtIiwiZ2VuZXJhdGVSYW5kb21TdHJpbmciLCJjaGFycyIsInJlc3VsdCIsImkiLCJjaGFyQXQiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJzYW5pdGl6ZVN0cmluZyIsInN0ciIsInJlcGxhY2UiLCJjb3JzUmVzcG9uc2UiLCJyZXNwb25zZSIsImhlYWRlcnMiLCJzZXQiLCJoYW5kbGVDb3JzT3B0aW9ucyIsIk5leHRSZXNwb25zZSIsInN0YXR1cyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/utils.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/semver","vendor-chunks/bcryptjs","vendor-chunks/jsonwebtoken","vendor-chunks/lodash.includes","vendor-chunks/jws","vendor-chunks/lodash.once","vendor-chunks/jwa","vendor-chunks/lodash.isinteger","vendor-chunks/ecdsa-sig-formatter","vendor-chunks/lodash.isplainobject","vendor-chunks/ms","vendor-chunks/lodash.isstring","vendor-chunks/lodash.isnumber","vendor-chunks/lodash.isboolean","vendor-chunks/safe-buffer","vendor-chunks/buffer-equal-constant-time"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fcoins%2Froute&page=%2Fapi%2Fcoins%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fcoins%2Froute.ts&appDir=D%3A%5Cgithub_repository%5Cporf_be%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=D%3A%5Cgithub_repository%5Cporf_be&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();